#My Personal Cookbook Report

## Applicatie Beschrijving
In My Personal Cookbook kan de gebruiker zijn eigen persoonlijke kookboek samenstellen aan de hand van zelfbedachte recepten en zijn of haar favoriete recepten uit kookboeken en het internet. Zo hoef je niet meer al je recepter te verzamelen in een papierenboekje, maar heb je alles handig op één plek.

## Technisch Ontwerp
In mijn MainActivity staan buttons die allebei naar een nieuw scherm leiden. De View Cookbook button leidt naar RecipeListActivity, waarin een ListView met alle recepten staat. 
<img src="Programmeerproject/doc/My Personal Cookbook_v2.pdf"></img>

#### Recepten Toevoegen
Als je op het plusje in de MainActivity klikt kom je in de TextOrPhotoActivity waarin je kan kiezen voor een Text Recipe of een Photo Recipe. Als je de "document" button klikt kom je in TextRecipeActivity en door op de "camera" button te klikken kom je in PhotoRecipeActivity. In TextRecipeActivity staan twee EditTexts, eentje voor de titel en de andere voor de tekst van het recept. Er is ook nog een button waarmee er een pop up menu wordt geopend. In dit menu kan je kiezen uit de optie om zelf een foto te nemen, of een afbeelding te kiezen uit de gallerij om aan het recept toe te voegen. Met de "save recipe" button wordt alle informatie uit de EditTexts, en de path naar de afbeelding, opgeslagen in de SQLite database door addRecipeInfo aan te roepen.   <br>
In de PhotoRecipeActivity staat ook een EditText voor de titel, de rest van het scherm bestaat uit buttons. Er is een button "select an image". Met de button kan er een afbeelding worden ingesteld die als omschrijving van je recept fungeert. Deze afbeelding kan worden ingesteld aan de hand van de camera of door een afbeelding uit de gallerij te kiezen. Net als in de TextRecipeActivity kan hier ook een extra afbeelding worden toegevoegd aan het recept aan de hand van de camera of de gallerij. Met de "save recipe" button worden alle foto paths en de titel uit de EditText opgeslagen in de SQLite Database door addPhotoRecipeInfo aan te roepen.<br>

#### Recepten Bekijken
In RecipeListActivity staat een ListView met een custom recipe adapter (RecipeAdapter), die zijn informatie uit de RecipeDataProvider haalt. Elke rij in de ListView bestaat een (optionele) afbeelding van het recept, en een TextView met de titel van het recept. Door op de titel te klikken kom je in de ShowRecipeActivity. In de intent naar deze activity moet al de informatie van het recept worden meegegeven. Dit gebeurt door de titel uit de TextView van de ListView item op te vragen. Aan de hand van deze titel kunnen de bijbehorende gegevens worden opgehaald uit de database. Als er lang op de titel wordt gedrukt wordt deze verwijderd door deleteTitle aan te roepen. <br>
In de ShowRecipeActivity wordt de meegestuurde informatie uit RecipeListActivity opgehaald. De recept titel wordt als een header bovenaan het scherm geplaatst, met daaronder de tekst of de afbeelding van het Foto Recept. De afbeelding van het Foto Recept moet van een foto path worden omgezet in een Bitmap, dit wordt gedaan door convertSrcToBitmap aan te roepen. 

#### Database
Ik gebruik voor deze app de SQLite database, om deze te gebruiken heb ik een RecipeDatabaseHelper class aangemaakt. Daarnaast heb is er ook een RecipeContract class. Hierin staan alle constanten die ik mijn database gebruik; de kolomnamen en de tabelnaam. In de RecipeDataBaseHelper wordt vervolgens een tabel aangemaakt met de kolommen "title", "photo", "text" en "photo_recipe". Al deze kolommen hebben een TEXT datatype, van de afbeeldingen wordt namelijk alleen de photo path opgeslagen in de database. Verder staan er een aantal functies in de RecipeDatabaseHelper die ik in mijn activities aanroep. Ten eerste addRecipeInfo, deze wordt aangeroepen in de TextRecipeActivity om een recept met een extra afbeelding toe te voegen. AddRecipeInfoTwo wordt ook in de TextRecipeActivity aangeroepen, maar dan wanneer je een recept wil opslaan zonder een extra afbeelding. <br>
Met addPhotoRecipeInfo kan ik op dezelfde manier recepten in de PhotoRecipeActivity opslaan. Ook hier heb ik weer een addPhotoRecipeInfoTwo om foto's zonder extra afbeelding mee op te slaan. <br>
Dan is er getRecipeInfo die een cursor terug geeft. Met deze cursor loop ik door de gespecificeerde kolommen heen om de titels en de bijbehorende afbeeldingen op te halen en deze in de RecipeListActivity weer te geven. <br>
Vervolgens zijn er drie functies die ik gebruik om bepaalde onderdelen van de tabel te selecteren. Ten eerste de getRecipePhotoText. Deze wordt aangeroepen in de RecipeListActivity wanneer de gebruiker op de titel klikt van een recept dat een Foto Recept bevat. De foto path van de bijbehorende afbeelding wordt meegegeven aan de intent naar ShowPhotoRecipe. Iets dergelijks gebeurt wanneer in RecipeListActivity getRecipeText wordt aangeroepen. Alleen wordt er in de intent nu een tekst van het recept meegegeven, in plaats van een afbeelding. De laatste is de deleteTitle. Deze wordt aangeroepen in de RecipeListActivity wanneer de gebruiker lang op een item in de ListView klikt, hiermee kan het recept worden verwijderd. 

##Uitdagingen
De grootste uitdaging voor mij tijdens dit project was de interactie met de SQLite database. Ten eerste was het opslaan van de foto's in de database lastig omdat ik er eerst vanuit ging dat ik de foto's zelf in de database zou moeten opslaan. In de tweede week kwam ik erachter dat ik de path van de foto moest gebruiken, en die gewoon als een TEXT moet opslaan in de database. De volgende uitdaging was vervolgens hoe ik elke afbeelding een unieke foto path kon geven (iedere foto moest een unieke titel krijgen) en hoe ik de foto path vervolgens het beste kon ophalen en weer omzetten naar een afbeelding. <br>
Dit eerste heb ik opgelost door elke foto een timestamp als afbeeldingsnaam mee te geven. Het omzetten van de foto path naar een afbeelding (Bitmap) in de app zelf bleef echter lastig. Het is me tegen het einde van week drie wel gelukt om de afbeeldingen die vanuit de gallery werden opgehaald om te zetten in een Bitmap. Dit bracht vervolgens wel weer het probleem met zich mee dat mijn app voortdurend een Out Of Memory Error gaf. Na lang zoeken bleek dit met een kleine aanpassing te verhelpen. Uiteindelijk kwam ik er aan het einde van de laatste week achter dat er een fout stond in het aanroepen van de path van de foto. Nadat dit verholpen was kon ik al mijn zelfgemaakte foto's ophalen en laten zien als Bitmap. <br>
De juiste informatie ophalen uit de database bleek sowieso een uitdaging te zijn voor mij. Dit ging met name fout in de RecipeListActivity en het meegeven van de juiste informatie vanuit die Activity naar de ShowRecipeActivity. Het laten zien van de juiste titels in de RecipeListActivity bleek uiteindelijk al fout te gaan in de TextRecipeActivity. Ik sloeg de informatie namelijk in de verkeerde volgorde op, waardoor de informatie in de verkeerde kolommen terecht kwam. Het meesturen van de juiste informatie naar ShowRecipeActivity bleek lastiger. Na veel vragen kwam ik erachter hoe ik in de RecipeDatabaseHelper een method kon aanmaken met een query om bepaalde informatie uit de database te halen. Om te bepalen uit welke rij van de database er informatie moest worden gehaald gebruik ik de recept titel die ik opvraag van de listview item. Door deze method een String te laten returnen kon ik deze informatie meegeven in een intent naar de ShowRecipeActivity. <br>
Voordat ik volledig door had hoe al deze functionaliteiten van de database werkten, was ik al bijna drie weken verder. Ondertussen had ik al wel in het aanmaken van de recepten een categorie veld aangemaakt, en deze werden ook netjes in mijn database opgeslagen. Ik had zelfs al een Spinner aangemaakt waarin alle categorieën werden opgehaald. Helaas had ik vervolgens niet de tijd om die categorieën op de juiste manier te implementeren, bedoelen dat een klik op een categorie in de spinner naar een nieuwe acticity zou leiden waar alleen de recepten stonden van die categorie. <br>
Wat ik in plaats van de categorieën wel heb gedaan is een receptenlijst te maken met een titel en een afbeelding. In mijn originele design zouden in die ListView alleen de titel van de recepten staan. Het was echter logischer, en mooier, om ook bij elke titel een foto van het recept te hebben, zodat je meteen ziet wat je gaat maken. Hiervoor moest ik een custom adapter maken, wat ook meer tijd kostte dan gedacht. In die adapter moest ik ook weer de juiste afbeeldingen uit de database ophalen, wat, zoals eerder beschreven, ook nog een uitdaging was. 

##Ontwerp Beslissingen
De grootste ontwerpbeslissing die ik moest maken was het verwijderen van de categorieën. Dit was een lastige beslissing omdat ik het een belangrijk onderdeel van de app vond, en ik ook zeker het idee dat het zou lukken om te implementeren als er wat meer tijd was. Het toevoegen van categorieën had het zoeken van recepten waarschijnlijk makkelijker gemaakt. Desondanks denk ik dat het schrappen van deze functionaliteit een goede beslissing was. Hierdoor had ik meer tijd om andere onderdelen van mijn app te verbeteren en het heeft de algehele functionaliteit van mijn app bevordert. Daarnaast is het ook mogelijk dat het zoeken van recepten misschien juist wel ingewikkelder was geworden met het bestaan van verschillende categorieën. Wat nou als je niet meer weet of je je recept voor paella had opgeslagen onder vis, vlees of rijst recepten? Dan is een volledige lijst met recepten wellicht wel makkelijker om doorheen te zoeken. 
